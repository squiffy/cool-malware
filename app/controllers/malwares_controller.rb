class MalwaresController < ApplicationController
  def index
    @malware = Malware.new
    @malwares = Malware.all
  end

  def create
    path = params[:malware][:binary].tempfile.path
    filename = params[:malware][:binary].original_filename

    # Save filename
    @malware = Malware.create name: filename
    @malware.save

    # Tell sidekiq to start running though the shiet
    MalwareWorker.perform_async path, @malware.id

    redirect_to malwares_url

  end
end

